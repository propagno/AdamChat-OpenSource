const { createProxyMiddleware } = require("http-proxy-middleware"); module.exports = function(app) { app.use("/api", createProxyMiddleware({ target: "http://backend-dev:5000", changeOrigin: true, pathRewrite: { "^/api": "/api" }, logLevel: "debug", timeout: 120000, proxyTimeout: 120000, onProxyReq: (proxyReq, req) => { console.log(`Proxy enviando requisição para: ${req.method} ${req.path}`); }, onError: (err, req, res) => { console.error("Erro de proxy:", err); res.writeHead(500, { "Content-Type": "application/json" }); res.end(JSON.stringify({ status: "error", message: `Erro ao conectar ao backend: ${err.message}`, code: err.code, target: "http://backend-dev:5000", path: req.path })); } })); };
