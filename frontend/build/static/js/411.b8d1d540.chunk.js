"use strict";(self.webpackChunkadamchat_frontend=self.webpackChunkadamchat_frontend||[]).push([[411],{5411:(e,o,r)=>{r.r(o),r.d(o,{default:()=>u});var n=r(5043),t=r(3216),a=r(5338);const i=()=>{try{const e=document.cookie.split(";");console.log("Cookies antes da limpeza:",e);for(let o of e){const[e]=o.trim().split("=");if(e){const o=[window.location.hostname,window.location.hostname.split(".").slice(1).join("."),""],r=["/","/auth","/realms",""];for(const n of o)for(const o of r){const r=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${o}${n?`; domain=${n}`:""}`;document.cookie=r}}}return console.log("Cookies ap\xf3s limpeza:",document.cookie),!0}catch(e){return console.error("Erro ao limpar cookies:",e),!1}},s=()=>{try{const e=["auth_token","refresh_token","user_info","auth_state","auth_session","auth_nonce","auth_callback"];for(const o of e)sessionStorage.removeItem(o);for(const o of e)localStorage.removeItem(o);return!0}catch(e){return console.error("Erro ao limpar storage:",e),!1}},c=()=>{if(window.location.href.includes("[object")||window.location.href.includes("Promise")||window.location.href.includes("undefined"))return console.error("Detectado loop de redirecionamento com URL inv\xe1lida"),!0;const e=parseInt(sessionStorage.getItem("redirect-count")||"0"),o=sessionStorage.getItem("last-redirect-url"),r=window.location.href;if(o===r){if(sessionStorage.setItem("redirect-count",(e+1).toString()),e>3)return console.error("Detectado loop de redirecionamento (mesma URL repetidamente)"),!0}else sessionStorage.setItem("last-redirect-url",r),sessionStorage.setItem("redirect-count","1");return!1},d=()=>{console.error("Interrompendo loop de redirecionamento e limpando estado de autentica\xe7\xe3o"),(()=>{try{return console.log("Iniciando limpeza completa de autentica\xe7\xe3o..."),i(),s(),window.history&&window.history.replaceState&&window.history.replaceState({},document.title,window.location.pathname),console.log("Limpeza de autentica\xe7\xe3o conclu\xedda com sucesso"),!0}catch(e){return console.error("Erro durante reset de autentica\xe7\xe3o:",e),!1}})(),sessionStorage.removeItem("redirect-count"),sessionStorage.removeItem("last-redirect-url"),window.location.replace(window.location.origin)};"undefined"!==typeof window&&(c()&&d(),window.addEventListener("load",(()=>{c()&&d()})));var l=r(579);const p={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f5f5f5",padding:"20px"},card:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",padding:"30px",maxWidth:"600px",width:"100%"},title:{color:"#333",marginBottom:"20px",textAlign:"center"},status:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"4px",marginBottom:"20px",textAlign:"center"},progressBar:{height:"5px",backgroundColor:"#e9ecef",borderRadius:"3px",overflow:"hidden",marginTop:"10px"},progressBarInner:{height:"100%",backgroundColor:"#007bff",width:"0%",animation:"progress 5s linear",animationFillMode:"forwards"},button:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer",width:"100%",marginBottom:"20px",fontWeight:"bold"},info:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"4px",fontSize:"14px"}},u=()=>{const[e,o]=(0,n.useState)("Iniciando limpeza de dados..."),[r,c]=(0,n.useState)(!1),d=(0,t.Zp)(),{logout:u}=(0,a.As)();(0,n.useEffect)((()=>{(async()=>{try{o("Limpando cookies..."),i(),o("Limpando localStorage e sessionStorage..."),s(),o("Deslogando do sistema..."),await u(),o("Limpeza completa! Redirecionando para a p\xe1gina inicial em 5 segundos..."),c(!0),setTimeout((()=>{d("/")}),5e3)}catch(e){console.error("Erro durante a limpeza:",e),o(`Erro durante a limpeza: ${e.message}`)}})()}),[d,u]);return(0,l.jsx)("div",{className:"login-reset-container",style:p.container,children:(0,l.jsxs)("div",{className:"login-reset-card",style:p.card,children:[(0,l.jsx)("h2",{style:p.title,children:"Reinicializa\xe7\xe3o de Login"}),(0,l.jsxs)("div",{className:"status",style:p.status,children:[(0,l.jsx)("p",{children:e}),r&&(0,l.jsx)("div",{className:"progress",style:p.progressBar,children:(0,l.jsx)("div",{className:"progress-bar",style:{...p.progressBarInner,animation:"progress 5s linear"}})})]}),r&&(0,l.jsx)("button",{onClick:()=>{d("/")},style:p.button,children:"Ir para p\xe1gina inicial agora"}),(0,l.jsxs)("div",{style:p.info,children:[(0,l.jsx)("h3",{children:"O que est\xe1 acontecendo?"}),(0,l.jsx)("p",{children:"Esta p\xe1gina est\xe1:"}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Removendo todos os cookies relacionados \xe0 autentica\xe7\xe3o"}),(0,l.jsx)("li",{children:"Limpando dados de login armazenados no navegador"}),(0,l.jsx)("li",{children:"Desconectando voc\xea do servi\xe7o de autentica\xe7\xe3o"}),(0,l.jsx)("li",{children:"Preparando seu navegador para um novo login limpo"})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Nota:"})," Se voc\xea continuar enfrentando problemas de login ap\xf3s este processo, considere limpar os cookies do seu navegador manualmente ou entre em contato com o suporte."]})]})]})})}}}]);
//# sourceMappingURL=411.b8d1d540.chunk.js.map